(this["webpackJsonpreason-game-of-life"]=this["webpackJsonpreason-game-of-life"]||[]).push([[0],{10:function(e,n,r){"use strict";var t=r(19),a=r(11),i=r(52),o=r(21);var c=a.imul(o.boardSize,o.boardSize),s=c<<1,u=Math.sqrt(s),l=360/u,d=i.make(c);var m={sqrSize:c,sumOfSquares:s,diagonalLength:u,hueIncrement:l,colorCache:d,rainbowHSL:function(e,n){var r,o=String(e)+"-"+String(n),c=i.get(d,o);if(void 0!==c)r=[c,!0];else{var s=a.imul(e,e)+a.imul(n,n)|0,u=Math.sqrt(s)*l,m=t.floor(u);r=["hsl("+String(m)+", 100%, 60%)",!1]}var f=r[0];return r[1]||i.set(d,o,f),f}};n.str=function(e){return e},n.arr=function(e){return e},n.avgFrameRate=function(e,n){return t.ceil(e/((Date.now()-n)/1e3))},n.Colors=m},17:function(e,n,r){"use strict";var t=r(2),a=r(36),i=r(41),o=r(42);r(71);var c=0|Date.now();a.renderToElementWithId(t.createElement(o.make,{}),"root"),i.register(),n.register_service_worker=function(e){return i.register(),0},n.randomSeed=c},21:function(e,n,r){"use strict";n.boardSize=29},29:function(e,n,r){"use strict";var t=r(2),a=r(9),i=a.css(void 0,[a.display(-1010954439),[a.color(a.Css.Color.white),0]]);var o={styles:i,make:function(e){var n={className:i},r=Object.assign(n,e),a=e.children;return t.createElement("div",r,[void 0!==a?a:null])}},c=a.css(void 0,[a.display(-1010954439),[a.textAlign(a.center),[a.justifyContent(a.center),[a.alignItems(a.center),[a.paddingTop(a.rem(2)),[a.fontSize(a.rem(2)),[a.lineHeight(a.rem(1)),0]]]]]]]);var s={styles:c,make:function(e){var n={className:c},r=Object.assign(n,e),a=e.children;return t.createElement("div",r,[void 0!==a?a:null])}},u=a.css(void 0,[a.width(a.pct(100)),0]);var l={styles:u,make:function(e){var n={className:u},r=Object.assign(n,e),a=e.children;return t.createElement("div",r,[void 0!==a?a:null])}};function d(e){var n=e.name;return t.createElement("i",{className:"fas fa-"+n})}var m={make:d};function f(e){var n=e.label,r=e.background,i=e.onClick,o=e.disabled,c=e.children,s=void 0!==o&&o,u=a.css(void 0,[a.fontSize(a.rem(.9)),[a.padding2(a.rem(.5),a.rem(.8)),[a.p("background-color",r),[a.width(a.rem(3)),[a.height(a.rem(3)),[a.color(a.Css.Color.white),[a.borderRadius(a.pct(50)),[a.margin2(a.zero,a.rem(.5)),[a.borderWidth(a.zero),[a.userSelect(a.none),[a.outline(a.rem(0),a.none,a.Css.Color.white),[a.fontWeight(700),[a.cursor(-786317123),0]]]]]]]]]]]]]);return t.createElement("button",{"aria-label":n,className:u,disabled:s,onClick:i},c)}var g={make:f};var v={make:function(e){var n=e.isToggled,r=e.onClick,a=e.label,i=e.disabled,o=void 0!==i&&i,c=n?"#666":"#7A8288",s=n?"pause":"play";return t.createElement(f,{label:a,background:c,onClick:r,disabled:o,children:t.createElement(d,{name:s})})}};n.Root=o,n.AppBar=s,n.Content=l,n.Icon=m,n.Button=g,n.ToggleButton=v},32:function(e,n,r){e.exports=r(33)},33:function(e,n,r){"use strict";r.r(n);r(34);var t=r(17);for(var a in t)"default"!==a&&function(e){r.d(n,e,(function(){return t[e]}))}(a)},41:function(e,n,r){"use strict";r.r(n),r.d(n,"register",(function(){return a})),r.d(n,"unregister",(function(){return o}));var t=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(e){if("serviceWorker"in navigator){if(new URL("/reason-game-of-life",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var n="".concat("/reason-game-of-life","/service-worker.js");t?(!function(e,n){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(r){var t=r.headers.get("content-type");404===r.status||null!=t&&-1===t.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):i(e,n)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(n,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):i(n,e)}))}}function i(e,n){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var r=e.installing;null!=r&&(r.onstatechange=function(){"installed"===r.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),n&&n.onUpdate&&n.onUpdate(e)):(console.log("Content is cached for offline use."),n&&n.onSuccess&&n.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function o(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},42:function(e,n,r){"use strict";var t=r(1),a=r(2),i=r(43),o=r(10),c=r(56),s=r(70),u=r(29);var l=function(e){var n=a.useReducer(c.Reducers.root,c.initialState),r=n[1],l=n[0],d=a.useCallback((function(e){return function(n){return t._1(r,[[e,n]])}}),[]),m=a.useCallback((function(e){return t._1(r,1)}),[]),f=a.useCallback((function(e){return t._1(r,0)}),[]),g=a.useCallback((function(e){return t._1(r,4)}),[]),v=a.useCallback((function(e){return l.isPlaying?(cancelAnimationFrame(l.animationFrameId.contents),t._1(r,3)):(function e(n){return l.animationFrameId.contents=requestAnimationFrame(e),t._1(r,4)}(),t._1(r,2))}),[l.animationFrameId,l.isPlaying]);return a.createElement(u.Root.make,{children:a.createElement(u.Content.make,{children:null},a.createElement(u.AppBar.make,{children:o.str("Conway's Game of Life")}),a.createElement(s.make,{isPlaying:l.isPlaying,onReset:m,onRandom:f,onTick:g,onToggleAutoplay:v}),a.createElement(i.make,{data:l.grid,onToggle:d}),a.createElement("div",void 0,o.str(l.isPlaying?"avg update rate: "+String(l.frameRate)+" fps":"")))})};n.make=l},43:function(e,n,r){"use strict";var t=r(1),a=r(2),i=r(9),o=r(5),c=r(51),s=r(10),u=i.css(void 0,[i.display(-1010954439),[i.border(i.em(.2),i.solid,i.Css.Color.black),[i.borderRadius(i.em(.5)),0]]]);function l(e){var n={className:u},r=Object.assign(n,e),t=e.children;return a.createElement("div",r,[void 0!==t?t:null])}var d={styles:u,make:l};var m=function(e){var n=e.data,r=e.onToggle,i=a.useCallback((function(e){return function(n,i){return a.createElement(c.make,{isAlive:1===i,onToggle:function(a){return t._2(r,e,n)},y:e,x:n,key:String(n)+"-"+String(e)})}}),[r]),u=a.useCallback((function(e){return function(n){return a.createElement("div",{key:String(e)},s.arr(o.mapWithIndex(n,t._1(i,e))))}}),[]);return a.createElement(l,{children:s.arr(o.mapWithIndex(n,u))})};n.Wrapper=d,n.make=m},51:function(e,n,r){"use strict";var t=r(1),a=r(2),i=r(9),o=r(10);function c(e,n){return i.css(void 0,[i.width(i.rem(.9)),[i.height(i.rem(.9)),[i.margin(i.px(1)),[i.p("background",e),[i.borderRadius(i.pct(50)),[i.transitionProperty(e),[i.transitionDuration(i.s(.1)),[i.transitionTimingFunction(i.easeInOut),[i.cursor(-786317123),[i.p("box-shadow",n),0]]]]]]]]]])}function s(e){var n={className:c(e.background,e.shadow)},r=Object.assign(n,e),t=e.children;return a.createElement("div",r,[void 0!==t?t:null])}var u={styles:c,make:s};var l=function(e){var n=e.isAlive,r=e.onToggle,i=e.y,c=e.x,u=o.Colors.rainbowHSL(i,c),l=n?u:"#272B30",d=a.useCallback((function(e){return function(n){return 1===n.nativeEvent.which?t._1(e,0):0}}),[]);return a.createElement(s,{onMouseDown:t._1(d,r),onMouseOver:t._1(d,r),shadow:n?"0 0 2px 1px "+String(u):"",background:l})};n.Wrapper=u,n.make=l},56:function(e,n,r){"use strict";var t=r(57),a=r(10),i=r(21);var o={grid:t.makeRandomGrid(i.boardSize,0|Date.now()),isPlaying:!1,animationFrameId:{contents:0},startedAt:void 0,ticks:0,frameRate:0};function c(e,n,r){if("number"!==typeof n)return t.toggleTile(e,n[0]);switch(n){case 0:return t.makeRandomGrid(i.boardSize,0|Date.now());case 1:return t.makeBlankGrid(i.boardSize);case 2:case 3:return e;case 4:return t.nextGeneration(e)}}function s(e,n,r){if(!("number"===typeof n&&n>=2))return e;switch(n-2|0){case 0:return!0;case 1:return!1;case 2:return e}}function u(e,n,r){if(!("number"===typeof n&&n>=2))return e;switch(n-2|0){case 0:return Date.now();case 1:return;case 2:return e}}function l(e,n,r){var t=r.isPlaying;if("number"!==typeof n)return e;switch(n){case 0:case 2:return e;case 1:case 3:return 0;case 4:return t?e+1|0:e}}function d(e,n,r){var t=r.startedAt;return"number"===typeof n?3!==n?n>=4&&void 0!==t?a.avgFrameRate(r.ticks,t):e:0:e}var m={grid:c,isPlaying:s,startedAt:u,ticks:l,frameRate:d,root:function(e,n){return{grid:c(e.grid,n),isPlaying:s(e.isPlaying,n),animationFrameId:e.animationFrameId,startedAt:u(e.startedAt,n),ticks:l(e.ticks,n,e),frameRate:d(e.frameRate,n,e)}}};n.makeSeed=function(e){return 0|Date.now()},n.initialState=o,n.Reducers=m},57:function(e,n,r){"use strict";var t=r(1),a=r(58),i=r(22),o=r(13),c=r(5),s=r(8);function u(e){var n=e[1],r=e[0];return n<0?r-1|0:n===r?0:n}function l(e,n){return[u([n,e[0]]),u([n,e[1]])]}function d(e,n){return c.mapWithIndex(n,(function(r,a){return c.mapWithIndex(a,(function(a,i){return t._3(e,[r,a],i,n)}))}))}function m(e){return c.make(e,c.make(e,0))}function f(e,n){var r=l(n,e.length);return s.caml_array_get(s.caml_array_get(e,r[0]),r[1])}var g=[-1,[0,[1,0]]];function v(e,n){var r=n[1],t=n[0];return o.map(o.keep(o.flatten(o.map(g,(function(e){return o.map(g,(function(n){return[t+e|0,r+n|0]}))}))),(function(e){return i.caml_notequal(e,[t,r])})),(function(n){return f(e,n)}))}function k(e,n){return o.length(o.keep(v(e,n),(function(e){return 1===e})))}function h(e,n,r){var t=k(r,e);return n?3===t||2===t?1:0:3!==t?0:1}n.safeIndex=u,n.safePoint=l,n.mapGrid=d,n.makeBlankGrid=m,n.makeRandomGrid=function(e,n){return a.init(n),d((function(e,n,r){return a.$$int(10)>7?1:0}),m(e))},n.getTile=f,n.offset=g,n.getNeighbours=v,n.countLivingNeighbours=k,n.nextState=h,n.nextGeneration=function(e){return d(h,e)},n.toggleTile=function(e,n){var r=c.map(e,(function(e){return e.slice(0)})),t=l(n,e.length),a=t[1],i=t[0],o=s.caml_array_get(s.caml_array_get(r,i),a);return s.caml_array_set(s.caml_array_get(r,i),a,o?0:1),r}},70:function(e,n,r){"use strict";var t=r(2),a=r(9),i=r(29),o=a.css(void 0,[a.display(-1010954439),[a.justifyContent(a.center),[a.alignItems(a.center),[a.padding2(a.rem(2),a.zero),0]]]]);function c(e){var n={className:o},r=Object.assign(n,e),a=e.children;return t.createElement("div",r,[void 0!==a?a:null])}var s={styles:o,make:c};var u=function(e){var n=e.isPlaying,r=e.onReset,a=e.onRandom,o=e.onTick,s=e.onToggleAutoplay;return t.createElement(c,{children:t.createElement("div",{role:"group"},t.createElement(i.Button.make,{label:"Reset grid",background:"#ee5f5b",onClick:r,children:t.createElement(i.Icon.make,{name:"undo"})}),t.createElement(i.Button.make,{label:"Random grid",background:"#62c462",onClick:a,children:t.createElement(i.Icon.make,{name:"random"})}),t.createElement(i.Button.make,{label:"Next state",background:"#7A8288",onClick:o,disabled:n,children:t.createElement(i.Icon.make,{name:"forward"})}),t.createElement(i.ToggleButton.make,{isToggled:n,onClick:s,label:"Toggle autpplay"}))})};n.Wrapper=s,n.make=u},71:function(e,n,r){}},[[32,1,2]]]);
//# sourceMappingURL=main.dee7ca44.chunk.js.map